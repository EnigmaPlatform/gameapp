#:import FadeTransition kivy.uix.screenmanager.FadeTransition

ScreenManager:
    transition: FadeTransition()
    
    MainScreen:
    FinalScreen:

<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15
        
        Label:
            id: points_label
            text: 'Очки: 100'
            font_size: '24sp'
            color: 0, 0.8, 1, 1
            size_hint_y: None
            height: 50
            
        GridLayout:
            cols: 1
            spacing: 10
            
            StatRow:
                stat_name: 'Сила'
                on_plus: root.change_stat('Сила', 1)
                on_minus: root.change_stat('Сила', -1)
                
            StatRow:
                stat_name: 'Ловкость'
                on_plus: root.change_stat('Ловкость', 1)
                on_minus: root.change_stat('Ловкость', -1)
                
            StatRow:
                stat_name: 'Интеллект'
                on_plus: root.change_stat('Интеллект', 1)
                on_minus: root.change_stat('Интеллект', -1)
                
            StatRow:
                stat_name: 'Выносливость'
                on_plus: root.change_stat('Выносливость', 1)
                on_minus: root.change_stat('Выносливость', -1)
                
            StatRow:
                stat_name: 'Харизма'
                on_plus: root.change_stat('Харизма', 1)
                on_minus: root.change_stat('Харизма', -1)
        
        Button:
            text: 'Сброс'
            size_hint_y: None
            height: 50
            background_color: 0.8, 0.2, 0.2, 1
            on_press: root.reset_stats()
            
        Button:
            text: 'Завершить'
            size_hint_y: None
            height: 50
            background_color: 0.2, 0.8, 0.2, 1
            on_press: root.finish_distribution()

<StatRow@BoxLayout>:
    stat_name: ''
    on_plus: None
    on_minus: None
    
    Label:
        text: root.stat_name
        font_size: '20sp'
        color: 0.8, 0.8, 0.8, 1
        size_hint_x: 0.4
        
    Button:
        text: '-'
        size_hint_x: None
        width: 50
        background_color: 0.3, 0.3, 0.3, 1
        on_press: root.on_minus()
        
    Label:
        id: stat_value
        text: '10'
        font_size: '20sp'
        color: 1, 1, 1, 1
        size_hint_x: None
        width: 50
        
    Button:
        text: '+'
        size_hint_x: None
        width: 50
        background_color: 0.3, 0.3, 0.3, 1
        on_press: root.on_plus()

<FinalScreen>:
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
                
        Label:
            text: 'Теперь ты часть игры'
            font_size: '32sp'
            color: 0.8, 0, 0, 1  # Кроваво-красный
            bold: True
